# リリース後の課題

## 1. 監査ログ（audit_logs）の中長期運用

### 1.1 背景
- 監査ログは主に「ユーザー操作起点の重要な変更」と「一部のセキュリティ・異常検知イベント」を対象としている。
- 参照系 GET からの監査記録は極力避ける方針とし、初期リリースではテーブル肥大化を防ぐため「書かない」を優先した。

### 1.2 課題
- 長期運用時における audit_logs テーブルのサイズ増加（必須イベントだけでも一定量は蓄積する）。
- 法務・コンプライアンス要件によっては、保持期間やアーカイブ方法の定義が必要になる可能性がある。

### 1.3 今後検討する施策（中期）
- 保持期間ポリシーの定義
  - 例: 90日 or 180日でオンラインからアーカイブへ移動。
- アーカイブ／削除の仕組み
  - 例: `audit_logs_archive` テーブルへの移し替え、S3 へのエクスポート後に削除、など。
- パーティショニング／インデックス最適化
  - `created_at` および `tenant_id` を軸としたパーティショニング検討。
- システムイベントの詳細粒度
  - `file_processed` や `query_analytics_rebuilt` など、「監査に残すべきか／運用ログで十分か」の境界線を、実運用のニーズに応じて再評価する。


