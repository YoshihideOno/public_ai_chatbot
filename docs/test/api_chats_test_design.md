# APIチャット機能テスト設計書

## 1. 概要
本ドキュメントは、AI Chatbot APIのチャット関連エンドポイントに対する包括的なテストケースを定義する。

## 2. テスト対象エンドポイント
- `POST /api/v1/chats/rag` (RAGチャット)
- `POST /api/v1/chats/widget/chat` (ウィジェットチャット)

## 3. テストケース詳細

### 3.1. `POST /api/v1/chats/rag` (RAGチャット)

#### 3.1.1. 正常系テストケース
- **ケース1**: 有効なクエリでチャット
- **ケース2**: 長文クエリ
- **ケース3**: 複数回の連続チャット
- **ケース4**: モデル指定

#### 3.1.2. 異常系テストケース
- **ケース1**: 空のクエリ
- **ケース2**: 非常に長いクエリ（境界値）
- **ケース3**: 無効なモデル指定
- **ケース4**: テナント未設定
- **ケース5**: 認証トークンなし

### 3.2. `POST /api/v1/chats/widget/chat` (ウィジェットチャット)

#### 3.2.1. 正常系テストケース
- **ケース1**: 有効なAPIキーでチャット
- **ケース2**: ウィジェット用のレスポンス形式

#### 3.2.2. 異常系テストケース
- **ケース1**: 無効なAPIキー
- **ケース2**: 期限切れAPIキー
- **ケース3**: 無効なテナント

## 4. パフォーマンステスト
- レスポンス時間: 10秒以内
- 同時接続: 50並行リクエスト

