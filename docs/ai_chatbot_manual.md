# RAG AI チャットボットプラットフォーム 取り扱い説明書

## 目次

1. [はじめに](#はじめに)
2. [ログイン・アカウント登録](#ログインアカウント登録)
3. [画面構成とナビゲーション](#画面構成とナビゲーション)
4. [基本操作](#基本操作)
5. [機能別操作手順](#機能別操作手順)
6. [よくある操作フロー](#よくある操作フロー)
7. [トラブルシューティング](#トラブルシューティング)
8. [用語集](#用語集)

---

## はじめに

本説明書では、RAG AIチャットボットプラットフォームの操作方法を説明します。

### 使用前の準備

- ブラウザ（Chrome、Firefox、Safari、Edgeの最新版）
- 管理者から提供されたアカウント情報（メールアドレス、パスワード）
- APIキー（チャット利用時、テナント管理者から取得）

### 画面表示について

本説明書は以下の記号を使用します。

- **【必須】**：必須操作
- **【任意】**：任意操作
- **注意**：重要な注意事項
- **ヒント**：便利な使い方

---

## ログイン・アカウント登録

### ログイン

1. ブラウザでシステムのURLにアクセス
2. トップページで「ログイン」をクリック、またはログイン画面に直接アクセス
3. ログインタブでメールアドレスとパスワードを入力
4. 「ログイン」をクリック
5. ダッシュボードに遷移

**注意**：パスワードは大文字・小文字を区別します。

### アカウント登録

本システムでは、テナント（組織）とテナント管理者を同時に登録します。

1. ログイン画面で「アカウント登録」タブをクリック
2. 必要事項を入力：

   **テナント情報**
   - **テナント名**（必須）：表示用の名前（例：株式会社サンプル）
   - **テナント識別子**（必須）：システム内での一意識別子（英数字、ハイフン、アンダースコアのみ、例：company-hr）

   **管理者情報**
   - **管理者メールアドレス**（必須）
   - **管理者ユーザー名**（必須、英数字とアンダースコアのみ、3文字以上）
   - **パスワード**（必須、8文字以上、大文字・小文字・数字を含む）
   - **パスワード確認**（必須）

3. 「アカウントを登録」をクリック
4. 登録完了後、確認メールが送信されます
5. メール内のリンクをクリックしてアカウントを有効化

**注意**：
- テナント名は同じ名前でも複数登録可能です
- テナント識別子はシステム内で一意である必要があります
- パスワードは8文字以上で、大文字・小文字・数字を含む必要があります

### パスワードリセット

1. ログイン画面で「パスワードを忘れた場合」をクリック
2. パスワードリセット画面でメールアドレスを入力
3. 「リセットメールを送信」をクリック
4. 送信されたメール内のリンクをクリック
5. 新しいパスワードを入力（8文字以上、大文字・小文字・数字を含む）
6. パスワード確認を入力
7. 「パスワードを更新」をクリック

**注意**：リセットメールのリンクは一定時間で無効になります。

---

## 画面構成とナビゲーション

### メインナビゲーション

ログイン後、左側のサイドバーから各機能へアクセスできます。

#### 表示されるメニュー項目（権限により異なります）

**全ユーザー**
- ダッシュボード
- コンテンツ管理
- 統計・分析

**テナント管理者・プラットフォーム管理者・監査者**
- 上記に加えて
- ユーザー管理

**プラットフォーム管理者のみ**
- 上記に加えて
- テナント管理

### ヘッダー

画面右上に以下が表示されます：

- **ユーザー名**：クリックでメニュー表示
  - プロフィール
  - 設定
  - ログアウト

### モバイル表示

スマートフォンでは、左上のメニューボタンでサイドバーを開閉します。

---

## 基本操作

### ボタンの種類

- **プライマリボタン**：主な操作（青背景）
- **セカンダリボタン**：補助的な操作（白背景）
- **削除ボタン**：削除操作（赤背景、確認ダイアログあり）

### フォーム入力

- **必須項目**：ラベルに赤い「*」表示
- **エラーメッセージ**：入力欄の下に表示

### ダイアログ

確認が必要な操作では、ダイアログが表示されます。「OK」または「キャンセル」を選択してください。

---

## 機能別操作手順

### 1. ダッシュボード

#### ダッシュボードの表示

ログイン後に表示されます。

#### 表示される情報

**ユーザー情報カード**
- ユーザー名
- メールアドレス
- ロール（権限）
- 所属テナント

**システム設定状況カード**【重要】
システム使用前に以下を確認してください。

- チャット用モデル：選択済みか
- ベクトル埋め込みモデル：選択済みか
- APIキー：必要数登録済みか（チャット用と埋め込み用が同じなら1つ、異なるなら2つ）
- システム使用可能状態：「準備完了」または「準備未完了」の表示

**準備未完了の場合**
「テナント設定」をクリックして設定を完了してください。

**統計カード**（管理者のみ）
- 総ユーザー数（プラットフォーム管理者のみ）
- 総テナント数（プラットフォーム管理者のみ）
- 総コンテンツ数
- 総質問数
- アクティブユーザー数
- インデックス済みコンテンツ数

**システム状況カード**（管理者のみ）
- コンテンツの処理状況（処理中、インデックス済み、失敗）

**最近の活動履歴**
- システム内での最近の操作履歴

---

### 2. コンテンツ管理

#### コンテンツ一覧の表示

1. サイドバーの「コンテンツ管理」をクリック
2. 登録済みコンテンツの一覧が表示されます

#### コンテンツの検索・フィルタ

- **検索ボックス**：タイトルや説明で検索
- **フィルタ**：
  - ファイルタイプ（PDF、HTML等）
  - ステータス（インデックス済み、処理中、失敗）

#### コンテンツの新規登録

**方法A：ファイルアップロード**

1. 一覧画面で「新規コンテンツ」をクリック
2. 「入力方法」で「ファイルをアップロード」を選択
3. 「ファイルアップロード」エリアをクリックまたはドラッグ&ドロップ
4. ファイルを選択（対応：PDF、HTML、Markdown、CSV、TXT）
5. 自動でファイルタイプが判定されます
6. **タイトル**を入力（必須）
7. **説明**を入力（任意）
8. **タグ**を入力（任意、カンマ区切り、最大10個）
9. 「保存」をクリック

**方法B：URL入力**

1. 一覧画面で「新規コンテンツ」をクリック
2. 「入力方法」で「URLを入力」を選択
3. URLを入力（例：`https://example.com/document.pdf`）
4. ファイルタイプが自動判定されます
5. タイトル、説明、タグを入力
6. 「保存」をクリック

**注意**：
- ファイルサイズは最大50MB
- URLがアクセス可能であることを確認（認証が必要なURLは対応していません）
- URLからの取得は30秒以内に完了する必要があります
- インデックス処理に数分かかる場合があります

#### コンテンツの編集

1. 一覧画面で編集したいコンテンツの行をクリック
2. 「編集」ボタンをクリック
3. タイトル、説明、タグを変更
4. 「保存」をクリック

**注意**：ファイル内容の変更はできません。変更する場合は新規登録してください。

#### コンテンツの詳細確認

1. 一覧画面でコンテンツをクリック
2. タブで以下の情報を確認できます：

**基本情報タブ**
- タイトル、説明、タグ
- ファイル名、ファイルタイプ
- アップロード日時
- ステータス（UPLOADED、PROCESSING、INDEXED、FAILED）

**コンテンツタブ**
- ファイル内容（テキストのみ）

**チャンクタブ**
- 分割されたチャンクの一覧
- 各チャンクの内容とメタデータ

**分析タブ**
- チャンク数
- 総文字数
- その他の統計情報

#### コンテンツの削除

1. コンテンツ詳細画面で「削除」をクリック
2. 確認ダイアログで「削除」を確認
3. 削除されます

**注意**：削除したコンテンツは復元できません。

#### コンテンツの再インデックス

処理が失敗した場合：

1. コンテンツ詳細画面を開く
2. 「再インデックス」をクリック
3. 再処理が開始されます

---

### 3. AIチャット機能

#### チャットの開始

**注意**：チャット機能を使用するには、以下の設定が必要です。
- チャット用モデルの選択
- ベクトル埋め込みモデルの選択
- 有効なAPIキーの登録

1. チャット画面を開く（ナビゲーションまたはダッシュボードから）
2. 質問を入力欄に入力
3. 送信ボタンをクリック
4. システムがナレッジベースを検索し、回答を生成

#### チャットの使い方

**質問の入力**
- 具体的な質問を入力すると精度が向上します
- 例：「このシステムの使い方を教えて」

**パラメータ設定**（上級者向け）
- **LLMモデル**：使用する生成AIモデル（デフォルトはテナント設定）
- **最大トークン数**：回答の長さ（デフォルト500）
- **温度パラメータ**：回答の創造性（0.0〜1.0、デフォルト0.7）

**会話履歴**
- 過去の会話が自動保存されます
- 前の会話を参照して回答します

#### チャットの管理

**新規チャット**
- 「新規チャット」をクリック

**チャット履歴の確認**
- 左側のサイドバーに履歴が表示されます

**チャットの削除**
- チャット履歴から削除したいチャットを選択
- 「削除」をクリック

---

### 4. テナント設定

**注意**：テナント管理者のみ設定可能です。

#### テナント設定画面の表示

1. サイドバーの「設定」をクリック（またはダッシュボードから「テナント設定」をクリック）
2. 設定画面が表示されます

#### LLMモデルの設定

**チャット用モデルの選択**

1. 「LLMモデル」セクションを開く
2. 「チャット用モデル」の説明を確認
3. ドロップダウンからモデルを選択
   - **OpenAI**: gpt-4, gpt-4-turbo, gpt-3.5-turbo, gpt-4o, gpt-4o-mini
   - **Anthropic**: claude-3-opus, claude-3-sonnet, claude-3-haiku, claude-3-5-sonnet
   - **Google**: gemini-pro, gemini-pro-vision, gemini-1.5-pro, gemini-1.5-flash
4. 「未選択」を選択すると設定をクリアできます
5. 「保存」をクリック

**ベクトル埋め込みモデルの選択**

1. 「ベクトル埋め込みモデル」の説明を確認
2. ドロップダウンからモデルを選択
   - チャット用モデルと同じモデル一覧から選択
3. 「未選択」を選択すると設定をクリアできます
4. 「保存」をクリック

**注意**：
- チャット用と埋め込み用で同じモデルを使用する場合は、APIキー1つで対応可能です
- 異なるモデルを使用する場合は、それぞれに対応するAPIキーが必要です

#### APIキーの管理

**APIキーの新規登録**

1. 「APIキー」セクションを開く
2. 「新規登録」をクリック
3. 以下の情報を入力：
   - **プロバイダー**：OpenAI、Anthropic、Googleから選択
   - **モデル**：使用するモデルを選択
   - **APIキー**：APIキーを入力
4. 「登録」をクリック

**注意**：
- APIキーは安全に管理してください
- 同一プロバイダー・同一モデルの組み合わせで複数のAPIキーは登録できません

**APIキーの有効/無効の切り替え**

1. 登録済みAPIキー一覧で対象のAPIキーを確認
2. 「有効/無効」スイッチを切り替え
3. 変更は即座に反映されます

**APIキーの編集**

1. 対象のAPIキーの行をクリック
2. 「編集」をクリック（実装されていない場合は管理者に依頼）

**APIキーの削除**

1. 対象のAPIキーの行をクリック
2. 「削除」をクリック
3. 確認ダイアログで「削除」を確認

**注意**：
- 削除したAPIキーは復元できません
- 有効なAPIキーが1つもない場合、チャット機能は使用できません

---

### 5. ユーザー管理（管理者向け）

**注意**：テナント管理者・プラットフォーム管理者・監査者のみ利用可能です。

#### ユーザー一覧の表示

1. サイドバーの「ユーザー管理」をクリック
2. ユーザー一覧が表示されます

#### ユーザーの新規作成

1. 一覧画面で「新規ユーザー」をクリック
2. 以下を入力：
   - **メールアドレス**（必須）
   - **ユーザー名**（必須、英数字とアンダースコアのみ、3文字以上）
   - **パスワード**（必須、8文字以上、大文字・小文字・数字を含む）
   - **ロール**（必須）：
     - OPERATOR：運用者
     - AUDITOR：監査者
     - TENANT_ADMIN：テナント管理者（プラットフォーム管理者のみ）
3. テナント管理者の場合は、所属テナントを指定
4. 「作成」をクリック

**注意**：
- プラットフォーム管理者は全テナントのユーザーを作成できます
- テナント管理者は自テナント内のユーザーのみ作成できます

#### ユーザーの編集

1. 対象ユーザーをクリック
2. 「編集」をクリック
3. ユーザー名、メールアドレス、ロール等を変更
4. 「保存」をクリック

#### ユーザーの削除

1. 対象ユーザーをクリック
2. 「削除」をクリック
3. 確認ダイアログで「削除」を確認

**注意**：削除したユーザーは復元できません。

---

### 6. 統計・分析

#### 統計画面の表示

1. サイドバーの「統計・分析」をクリック
2. 統計情報が表示されます

#### 表示される情報

**利用統計**
- 総質問数
- ユニークユーザー数
- 期間別の統計

**ストレージ統計**
- 総ファイル数
- 総ストレージ使用量

**トップクエリ**
- よく質問される内容

**期間選択**
- 期間を選択して統計を表示

---

## よくある操作フロー

### フロー1：初回セットアップ（テナント管理者）

1. **ログイン**
   - メールアドレスとパスワードでログイン

2. **ダッシュボードで確認**
   - システム設定状況を確認
   - 不足があれば「テナント設定」をクリック

3. **LLMモデルの設定**
   - 「LLMモデル」セクションを開く
   - チャット用モデルを選択
   - ベクトル埋め込みモデルを選択
   - 「保存」をクリック

4. **APIキーの登録**
   - 「APIキー」セクションを開く
   - 使用するモデルに対応するAPIキーを登録
   - 有効化されていることを確認

5. **コンテンツの登録**
   - 「コンテンツ管理」を開く
   - 「新規コンテンツ」をクリック
   - ファイルまたはURLから登録
   - インデックス完了まで待つ

6. **動作確認**
   - チャット機能でテスト質問
   - 回答の精度を確認

### フロー2：日常的なコンテンツ追加

1. **コンテンツ管理画面を開く**
   - サイドバーの「コンテンツ管理」をクリック

2. **新規コンテンツを登録**
   - 「新規コンテンツ」をクリック
   - ファイルまたはURLを選択
   - メタデータを入力
   - 「保存」をクリック

3. **インデックス完了を確認**
   - ステータスが「インデックス済み（INDEXED）」になるまで待つ
   - 通常は数分以内

### フロー3：チャットで質問する

1. **システム設定を確認**
   - ダッシュボードで「準備完了」を確認

2. **チャット画面を開く**
   - ナビゲーションメニューまたはダッシュボードから開く

3. **質問を入力**
   - 具体的な質問を入力
   - 送信ボタンをクリック

4. **回答を確認**
   - システムが生成した回答を確認
   - 必要に応じて追加質問

5. **会話履歴の確認**
   - 過去の会話を確認

---

## トラブルシューティング

### 問題1：ログインできない

**原因と対処法**

1. **メールアドレス・パスワードの誤り**
   - 大文字・小文字を確認
   - パスワードリセットを試す

2. **アカウントが無効**
   - 管理者に連絡

3. **ブラウザのキャッシュ**
   - キャッシュをクリア
   - 別ブラウザで試す

### 問題2：チャット機能が動作しない

**原因と対処法**

1. **システム設定が未完了**
   - ダッシュボードで設定状況を確認
   - 不足があれば設定

2. **APIキーが無効**
   - テナント設定でAPIキーの有効性を確認
   - 必要に応じて再登録

3. **コンテンツがインデックスされていない**
   - コンテンツ管理でステータスを確認
   - 処理中や失敗の場合は再インデックス

### 問題3：コンテンツがインデックスされない

**原因と対処法**

1. **ファイル形式が対応外**
   - PDF、HTML、Markdown、CSV、TXTを確認

2. **ファイルサイズが制限超過**
   - 50MB以下を確認

3. **URLにアクセスできない**
   - URLの有効性を確認
   - 認証が必要なURLは対応していません
   - 30秒以内に取得できることを確認

4. **処理エラー**
   - コンテンツ詳細でエラー内容を確認
   - 再インデックスを試す

### 問題4：APIキーの登録に失敗する

**原因と対処法**

1. **APIキーが正しくない**
   - コピー&ペーストの誤りがないか確認

2. **同一のAPIキーが既に登録済み**
   - 登録済み一覧を確認

3. **プロバイダーとモデルの組み合わせが不正**
   - 対応する組み合わせか確認

### 問題5：画面が正しく表示されない

**原因と対処法**

1. **ブラウザのバージョンが古い**
   - 最新版に更新

2. **JavaScriptが無効**
   - 有効化

3. **ネットワークの問題**
   - 接続を確認

---

## 用語集

### AI関連

- **RAG（Retrieval-Augmented Generation）**：検索拡張生成。文書検索と生成AIを組み合わせた技術
- **LLM（Large Language Model）**：大規模言語モデル（ChatGPT、Claude等）
- **埋め込み（Embedding）**：テキストを数値ベクトルに変換する技術
- **チャンク（Chunk）**：文書を分割した単位

### システム関連

- **テナント**：組織単位のデータ分離単位
- **インデックス**：検索可能な状態にすること
- **APIキー**：外部APIサービスにアクセスするための認証キー
- **プロバイダー**：AIサービス提供者（OpenAI、Anthropic、Google等）

### ステータス

- **アップロード済み（UPLOADED）**：ファイルが登録された状態
- **処理中（PROCESSING）**：インデックス処理中の状態
- **インデックス済み（INDEXED）**：検索可能な状態
- **失敗（FAILED）**：処理が失敗した状態

### ロール

- **プラットフォーム管理者（PLATFORM_ADMIN）**：全システムの管理権限
- **テナント管理者（TENANT_ADMIN）**：自テナントの管理権限
- **運用者（OPERATOR）**：一般的な操作権限
- **監査者（AUDITOR）**：読み取り専用権限

---

**最終更新日**：2025年1月  
**バージョン**：1.0.0

---

